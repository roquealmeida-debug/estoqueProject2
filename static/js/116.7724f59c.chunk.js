"use strict";(self.webpackChunkestoque_react=self.webpackChunkestoque_react||[]).push([[116],{116:(e,t,o)=>{o.r(t),o.d(t,{default:()=>r});var a=o(43),i=o(762),l=(o(557),o(579));const r=a.memo((()=>{const[e,t]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[n,d]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[x,j]=(0,a.useState)(""),[A,S]=(0,a.useState)(""),[v,C]=(0,a.useState)([]),[I,g]=(0,a.useState)(null),[b,N]=(0,a.useState)(""),[E,O]=(0,a.useState)({}),[M,R]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=localStorage.getItem("medicamentos");e&&C(JSON.parse(e))}),[]);const L=()=>{t(""),r(""),d(""),c(""),p(""),m(""),j(""),S(""),g(null)},f=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),T=()=>{const t={};return e||(t.nome="O nome \xe9 obrigat\xf3rio."),o||(t.laboratorio="O laborat\xf3rio \xe9 obrigat\xf3rio."),n||(t.tipoServico="Selecione um tipo de servi\xe7o."),s||(t.tipoMedicamento="Selecione um tipo de medicamento."),u||(t.lote="O lote \xe9 obrigat\xf3rio."),(!h||h<=0)&&(t.quantidade="A quantidade deve ser maior que zero."),x||(t.dataValidade="A data de validade \xe9 obrigat\xf3ria."),(!A||A<=0)&&(t.valor="O valor deve ser maior que zero."),O(t),0===Object.keys(t).length};return(0,l.jsxs)("div",{children:[M&&(0,l.jsx)("div",{className:"loading-indicator",children:"Carregando..."}),(0,l.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!T())return;const a={nome:e.toUpperCase(),laboratorio:o.toUpperCase(),tipoServico:n.toUpperCase(),tipoMedicamento:s.toUpperCase(),lotes:[{lote:u.toUpperCase(),quantidade:h,dataValidade:x,valor:parseFloat(A.replace(/\./g,"").replace(",","."))}]},i=null!==I?v.map(((e,t)=>t===I?a:e)):[...v,a];C(i),localStorage.setItem("medicamentos",JSON.stringify(i)),L()},children:[(0,l.jsx)("label",{htmlFor:"nome",children:"Nome"}),(0,l.jsx)("input",{type:"text",id:"nome",placeholder:"Nome",value:e,onChange:e=>t(e.target.value),required:!0}),E.nome&&(0,l.jsx)("span",{className:"error",children:E.nome}),(0,l.jsx)("label",{htmlFor:"laboratorio",children:"Laborat\xf3rio"}),(0,l.jsx)("input",{type:"text",id:"laboratorio",placeholder:"Laborat\xf3rio",value:o,onChange:e=>r(e.target.value),required:!0}),E.laboratorio&&(0,l.jsx)("span",{className:"error",children:E.laboratorio}),(0,l.jsx)("label",{htmlFor:"tipoServico",children:"Tipo de Servi\xe7o"}),(0,l.jsxs)("select",{id:"tipoServico",value:n,onChange:e=>d(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Selecione um tipo de servi\xe7o..."}),(0,l.jsx)("option",{value:"ANEMIA FALCIFORME",children:"ANEMIA FALCIFORME"}),(0,l.jsx)("option",{value:"ANTIMICROBIANOS",children:"ANTIMICROBIANOS"}),(0,l.jsx)("option",{value:"ASSIST\xcaNCIA FARMAC\xcaUTICA",children:"ASSIST\xcaNCIA FARMAC\xcaUTICA"}),(0,l.jsx)("option",{value:"ASSIST\xcaNCIA FARMAC\xcaUTICA B\xc1SICA",children:"ASSIST\xcaNCIA FARMAC\xcaUTICA B\xc1SICA"}),(0,l.jsx)("option",{value:"DIABETES",children:"DIABETES"}),(0,l.jsx)("option",{value:"HIPERTENS\xc3O",children:"HIPERTENS\xc3O"}),(0,l.jsx)("option",{value:"SA\xdaDE DA MULHER",children:"SA\xdaDE DA MULHER"}),(0,l.jsx)("option",{value:"SA\xdaDE MENTAL",children:"SA\xdaDE MENTAL"}),(0,l.jsx)("option",{value:"URG\xcaNCIA E EMERG\xcaNCIA",children:"URG\xcaNCIA E EMERG\xcaNCIA"})]}),E.tipoServico&&(0,l.jsx)("span",{className:"error",children:E.tipoServico}),(0,l.jsx)("label",{htmlFor:"tipoMedicamento",children:"Tipo de Medicamento"}),(0,l.jsxs)("select",{id:"tipoMedicamento",value:s,onChange:e=>c(e.target.value),required:!0,children:[(0,l.jsx)("option",{value:"",children:"Selecione um tipo de medicamento..."}),(0,l.jsx)("option",{value:"ADESIVO",children:"ADESIVO"}),(0,l.jsx)("option",{value:"AMPOLA",children:"AMPOLA"}),(0,l.jsx)("option",{value:"BISNAGA",children:"BISNAGA"}),(0,l.jsx)("option",{value:"CAPSULA",children:"CAPSULA"}),(0,l.jsx)("option",{value:"CARTELA",children:"CARTELA"}),(0,l.jsx)("option",{value:"COMPRIMIDO",children:"COMPRIMIDO"}),(0,l.jsx)("option",{value:"CREME",children:"CREME"}),(0,l.jsx)("option",{value:"FRASCO",children:"FRASCO"}),(0,l.jsx)("option",{value:"FRASCO AMPOLA",children:"FRASCO AMPOLA"}),(0,l.jsx)("option",{value:"GEL",children:"GEL"}),(0,l.jsx)("option",{value:"GOTAS",children:"GOTAS"}),(0,l.jsx)("option",{value:"POMADA",children:"POMADA"}),(0,l.jsx)("option",{value:"SPRAY",children:"SPRAY"}),(0,l.jsx)("option",{value:"SUPOSIT\xd3RIO",children:"SUPOSIT\xd3RIO"}),(0,l.jsx)("option",{value:"XAROPE",children:"XAROPE"})]}),E.tipoMedicamento&&(0,l.jsx)("span",{className:"error",children:E.tipoMedicamento}),(0,l.jsx)("label",{htmlFor:"lote",children:"Lote"}),(0,l.jsx)("input",{type:"text",id:"lote",placeholder:"Lote",value:u,onChange:e=>p(e.target.value),required:!0}),E.lote&&(0,l.jsx)("span",{className:"error",children:E.lote}),(0,l.jsx)("label",{htmlFor:"quantidade",children:"Quantidade"}),(0,l.jsx)("input",{type:"number",id:"quantidade",placeholder:"Quantidade",value:h,onChange:e=>m(e.target.value),required:!0}),E.quantidade&&(0,l.jsx)("span",{className:"error",children:E.quantidade}),(0,l.jsx)("label",{htmlFor:"dataValidade",children:"Data de Validade"}),(0,l.jsx)("input",{type:"date",id:"dataValidade",placeholder:"Data de Validade",value:x,onChange:e=>j(e.target.value),required:!0}),E.dataValidade&&(0,l.jsx)("span",{className:"error",children:E.dataValidade}),(0,l.jsx)("label",{htmlFor:"valor",children:"Valor"}),(0,l.jsx)("input",{type:"text",id:"valor",placeholder:"Valor",value:f(A/100),onChange:e=>{const t=e.target.value.replace(/\D/g,""),o=f(t/100);S(t),e.target.value=o},required:!0}),E.valor&&(0,l.jsx)("span",{className:"error",children:E.valor}),(0,l.jsx)("button",{type:"submit",children:null!==I?"Atualizar Medicamento":"Adicionar Medicamento"})]}),(0,l.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px"},children:[(0,l.jsx)("input",{type:"text",placeholder:"Buscar Medicamento",value:b,onChange:e=>N(e.target.value),className:"search-input"}),(0,l.jsx)("button",{className:"search-button",onClick:()=>{},children:"Buscar"})]}),(0,l.jsxs)("div",{className:"export-buttons",children:[(0,l.jsx)("button",{onClick:()=>{R(!0);const e=JSON.stringify(v,null,2),t=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download="medicamentos.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),R(!1)},children:"Exportar Medicamentos"}),(0,l.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return void alert("Por favor, selecione um arquivo.");R(!0);const o=new FileReader;o.onload=e=>{try{const t=JSON.parse(e.target.result);C(t),localStorage.setItem("medicamentos",JSON.stringify(t))}catch(t){alert("Erro ao importar JSON. Verifique o formato do arquivo.")}finally{R(!1)}},o.readAsText(t)},style:{display:"none"},id:"file-input"}),(0,l.jsx)("button",{onClick:()=>document.getElementById("file-input").click(),className:"import-button",children:"Importar Medicamentos"}),(0,l.jsx)("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("medicamentos"))||[],t=new i.jsPDF;let o=20;const a=t.internal.pageSize.getWidth();e.reduce(((e,t)=>{const o=e.find((e=>e.nome===t.nome));return o?o.lotes.push(...t.lotes):e.push({...t,lotes:[...t.lotes]}),e}),[]).forEach((e=>{t.setFontSize(10);const i=o;t.setFillColor(220,220,220),t.rect(0,i,a,8,"F"),t.setTextColor(0);const l=e.nome||"";t.text(l,10,i+5),o+=11,t.setFontSize(7);let r=0,n=0;e.lotes.forEach((a=>{let i=10;const l=a.lote||"",d=a.dataValidade||"",s=e.tipoServico||"",c=e.tipoMedicamento||"",u=Number(a.quantidade)||0,p=Number(a.valor)*u;l&&(t.text(`${l}`,i,o),i+=30),d&&(t.text(`${d}`,i,o),i+=30),s&&(t.text(`${s}`,i,o),i+=50),c&&(t.text(`${c}`,i,o),i+=30),t.text(`${u}`,i,o),r+=u,i+=30,t.text(`${f(p)}`,i,o),n+=p,o+=5,o+8+3>t.internal.pageSize.getHeight()-20&&(t.addPage(),o=20)})),o+=3,t.setFontSize(7),t.text(`Total Quantidade: ${r}`,10,o),t.text(`Total Valor: ${f(n)}`,100,o),o+=5})),t.save("estoque_medicamentos.pdf")},children:"Exportar PDF"})," "]}),(0,l.jsx)("div",{id:"estoque",children:(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Nome"}),(0,l.jsx)("th",{children:"Laborat\xf3rio"}),(0,l.jsx)("th",{children:"Tipo de Servi\xe7o"}),(0,l.jsx)("th",{children:"Tipo de Medicamento"}),(0,l.jsx)("th",{children:"Lote"}),(0,l.jsx)("th",{children:"Quantidade"}),(0,l.jsx)("th",{children:"Data de Validade"}),(0,l.jsx)("th",{children:"Valor"}),(0,l.jsx)("th",{children:"A\xe7\xf5es"})]})}),(0,l.jsx)("tbody",{children:v&&v.length>0?v.filter((e=>e.nome.toLowerCase().includes(b.toLowerCase())||e.laboratorio.toLowerCase().includes(b.toLowerCase())||e.tipoServico.toLowerCase().includes(b.toLowerCase())||e.tipoMedicamento.toLowerCase().includes(b.toLowerCase()))).sort(((e,t)=>e.nome.localeCompare(t.nome))).map(((e,o)=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.nome}),(0,l.jsx)("td",{children:e.laboratorio||"N/A"}),(0,l.jsx)("td",{children:e.tipoServico||"N/A"}),(0,l.jsx)("td",{children:e.tipoMedicamento||"N/A"}),(0,l.jsx)("td",{children:e.lotes.map((e=>e.lote)).join(", ")}),(0,l.jsx)("td",{children:e.lotes.map((e=>e.quantidade)).join(", ")}),(0,l.jsx)("td",{children:e.lotes.map((e=>e.dataValidade)).join(", ")}),(0,l.jsx)("td",{children:e.lotes.map((e=>f(e.valor))).join(", ")}),(0,l.jsxs)("td",{children:[(0,l.jsx)("button",{onClick:()=>(e=>{const o=v[e];t(o.nome),r(o.laboratorio),d(o.tipoServico),c(o.tipoMedicamento),p(o.lotes[0].lote),m(o.lotes[0].quantidade),j(o.lotes[0].dataValidade),S(f(o.lotes[0].valor)),g(e)})(o),children:"Editar"}),(0,l.jsx)("button",{onClick:()=>(e=>{if(window.confirm("Tem certeza que deseja excluir este medicamento?")){const t=v.filter(((t,o)=>o!==e));C(t),localStorage.setItem("medicamentos",JSON.stringify(t))}})(o),children:"Excluir"})]})]},o))):(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"9",children:"Nenhum medicamento encontrado."})})})]})})]})}))}}]);
//# sourceMappingURL=116.7724f59c.chunk.js.map