"use strict";(self.webpackChunkestoque_react=self.webpackChunkestoque_react||[]).push([[116],{116:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var a=o(43),i=o(762),r=(o(557),o(579));const n=a.memo((()=>{const[e,t]=(0,a.useState)(""),[o,n]=(0,a.useState)(""),[l,s]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),[m,j]=(0,a.useState)(""),[S,A]=(0,a.useState)(""),[v,C]=(0,a.useState)([]),[g,E]=(0,a.useState)(null),[b,I]=(0,a.useState)(""),[N,M]=(0,a.useState)({}),[O,f]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=localStorage.getItem("medicamentos");e&&C(JSON.parse(e))}),[]);const T=()=>{t(""),n(""),s(""),c(""),p(""),x(""),j(""),A(""),E(null)},R=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),L=()=>{const t={};return e||(t.nome="O nome \xe9 obrigat\xf3rio."),o||(t.laboratorio="O laborat\xf3rio \xe9 obrigat\xf3rio."),l||(t.tipoServico="Selecione um tipo de servi\xe7o."),d||(t.tipoMedicamento="Selecione um tipo de medicamento."),u||(t.lote="O lote \xe9 obrigat\xf3rio."),(!h||h<=0)&&(t.quantidade="A quantidade deve ser maior que zero."),m||(t.dataValidade="A data de validade \xe9 obrigat\xf3ria."),(!S||S<=0)&&(t.valor="O valor deve ser maior que zero."),M(t),0===Object.keys(t).length};return(0,r.jsxs)("div",{children:[O&&(0,r.jsx)("div",{className:"loading-indicator",children:"Carregando..."}),(0,r.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!L())return;const a={nome:e.toUpperCase(),laboratorio:o.toUpperCase(),tipoServico:l.toUpperCase(),tipoMedicamento:d.toUpperCase(),lotes:[{lote:u.toUpperCase(),quantidade:h,dataValidade:m,valor:parseFloat(S.replace(/\./g,"").replace(",","."))}]},i=null!==g?v.map(((e,t)=>t===g?a:e)):[...v,a];C(i),localStorage.setItem("medicamentos",JSON.stringify(i)),T()},children:[(0,r.jsx)("label",{htmlFor:"nome",children:"Nome"}),(0,r.jsx)("input",{type:"text",id:"nome",placeholder:"Nome",value:e,onChange:e=>t(e.target.value),required:!0}),N.nome&&(0,r.jsx)("span",{className:"error",children:N.nome}),(0,r.jsx)("label",{htmlFor:"laboratorio",children:"Laborat\xf3rio"}),(0,r.jsx)("input",{type:"text",id:"laboratorio",placeholder:"Laborat\xf3rio",value:o,onChange:e=>n(e.target.value),required:!0}),N.laboratorio&&(0,r.jsx)("span",{className:"error",children:N.laboratorio}),(0,r.jsx)("label",{htmlFor:"tipoServico",children:"Tipo de Servi\xe7o"}),(0,r.jsxs)("select",{id:"tipoServico",value:l,onChange:e=>s(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecione um tipo de servi\xe7o..."}),(0,r.jsx)("option",{value:"ANEMIA FALCIFORME",children:"ANEMIA FALCIFORME"}),(0,r.jsx)("option",{value:"ANTIMICROBIANOS",children:"ANTIMICROBIANOS"}),(0,r.jsx)("option",{value:"ASSIST\xcaNCIA FARMAC\xcaUTICA",children:"ASSIST\xcaNCIA FARMAC\xcaUTICA"}),(0,r.jsx)("option",{value:"ASSIST\xcaNCIA FARMAC\xcaUTICA B\xc1SICA",children:"ASSIST\xcaNCIA FARMAC\xcaUTICA B\xc1SICA"}),(0,r.jsx)("option",{value:"DIABETES",children:"DIABETES"}),(0,r.jsx)("option",{value:"HIPERTENS\xc3O",children:"HIPERTENS\xc3O"}),(0,r.jsx)("option",{value:"SA\xdaDE DA MULHER",children:"SA\xdaDE DA MULHER"}),(0,r.jsx)("option",{value:"SA\xdaDE MENTAL",children:"SA\xdaDE MENTAL"}),(0,r.jsx)("option",{value:"URG\xcaNCIA E EMERG\xcaNCIA",children:"URG\xcaNCIA E EMERG\xcaNCIA"})]}),N.tipoServico&&(0,r.jsx)("span",{className:"error",children:N.tipoServico}),(0,r.jsx)("label",{htmlFor:"tipoMedicamento",children:"Tipo de Medicamento"}),(0,r.jsxs)("select",{id:"tipoMedicamento",value:d,onChange:e=>c(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecione um tipo de medicamento..."}),(0,r.jsx)("option",{value:"ADESIVO",children:"ADESIVO"}),(0,r.jsx)("option",{value:"AMPOLA",children:"AMPOLA"}),(0,r.jsx)("option",{value:"BISNAGA",children:"BISNAGA"}),(0,r.jsx)("option",{value:"CAPSULA",children:"CAPSULA"}),(0,r.jsx)("option",{value:"CARTELA",children:"CARTELA"}),(0,r.jsx)("option",{value:"COMPRIMIDO",children:"COMPRIMIDO"}),(0,r.jsx)("option",{value:"CREME",children:"CREME"}),(0,r.jsx)("option",{value:"FRASCO",children:"FRASCO"}),(0,r.jsx)("option",{value:"FRASCO AMPOLA",children:"FRASCO AMPOLA"}),(0,r.jsx)("option",{value:"GEL",children:"GEL"}),(0,r.jsx)("option",{value:"GOTAS",children:"GOTAS"}),(0,r.jsx)("option",{value:"POMADA",children:"POMADA"}),(0,r.jsx)("option",{value:"SPRAY",children:"SPRAY"}),(0,r.jsx)("option",{value:"SUPOSIT\xd3RIO",children:"SUPOSIT\xd3RIO"}),(0,r.jsx)("option",{value:"XAROPE",children:"XAROPE"})]}),N.tipoMedicamento&&(0,r.jsx)("span",{className:"error",children:N.tipoMedicamento}),(0,r.jsx)("label",{htmlFor:"lote",children:"Lote"}),(0,r.jsx)("input",{type:"text",id:"lote",placeholder:"Lote",value:u,onChange:e=>p(e.target.value),required:!0}),N.lote&&(0,r.jsx)("span",{className:"error",children:N.lote}),(0,r.jsx)("label",{htmlFor:"quantidade",children:"Quantidade"}),(0,r.jsx)("input",{type:"number",id:"quantidade",placeholder:"Quantidade",value:h,onChange:e=>x(e.target.value),required:!0}),N.quantidade&&(0,r.jsx)("span",{className:"error",children:N.quantidade}),(0,r.jsx)("label",{htmlFor:"dataValidade",children:"Data de Validade"}),(0,r.jsx)("input",{type:"date",id:"dataValidade",placeholder:"Data de Validade",value:m,onChange:e=>j(e.target.value),required:!0}),N.dataValidade&&(0,r.jsx)("span",{className:"error",children:N.dataValidade}),(0,r.jsx)("label",{htmlFor:"valor",children:"Valor"}),(0,r.jsx)("input",{type:"text",id:"valor",placeholder:"Valor",value:R(S/100),onChange:e=>{const t=e.target.value.replace(/\D/g,""),o=R(t/100);A(t),e.target.value=o},required:!0}),N.valor&&(0,r.jsx)("span",{className:"error",children:N.valor}),(0,r.jsx)("button",{type:"submit",children:null!==g?"Atualizar Medicamento":"Adicionar Medicamento"})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar Medicamento",value:b,onChange:e=>I(e.target.value),className:"search-input"}),(0,r.jsx)("button",{className:"search-button",onClick:()=>{},children:"Buscar"})]}),(0,r.jsxs)("div",{className:"export-buttons",children:[(0,r.jsx)("button",{onClick:()=>{f(!0);const e=JSON.stringify(v,null,2),t=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download="medicamentos.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),f(!1)},children:"Exportar Medicamentos"}),(0,r.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return void alert("Por favor, selecione um arquivo.");f(!0);const o=new FileReader;o.onload=e=>{try{const t=JSON.parse(e.target.result);C(t)}catch(t){alert("Erro ao importar JSON. Verifique o formato do arquivo.")}finally{f(!1)}},o.readAsText(t)},style:{display:"none"},id:"file-input"}),(0,r.jsx)("button",{onClick:()=>document.getElementById("file-input").click(),className:"import-button",children:"Importar Medicamentos"}),(0,r.jsx)("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("medicamentos"))||[],t=new i.jsPDF,o=20,a=30,r=25,n=30,l=20,s=30,d=40;let c=20;const u=t.internal.pageSize.getWidth();t.setFontSize(10),t.text("Controle de Estoque de Medicamentos",u/2,c,{align:"center"}),c+=6,t.setFontSize(9),t.text(`Data: ${(new Date).toLocaleDateString()}`,u/2,c,{align:"center"}),c+=10,e.forEach((e=>{t.setFontSize(10);const i=c;t.setFillColor(220,220,220),t.rect(0,i,u,8,"F"),t.setTextColor(0);const p=e.nome||"";t.text(p,10,i+5),c+=11,t.setFontSize(7);let h=0,x=0;e.lotes.forEach((i=>{let u=10;const p=i.lote||"",m=i.dataValidade||"",j=e.tipoServico||"",S=e.tipoMedicamento||"",A=Number(i.quantidade)||0,v=Number(i.valor)||0,C=e.laboratorio||"";if(p){t.splitTextToSize(p,o).forEach(((e,a)=>{const i=u+o/2;t.text(e,i,c+5*a,{align:"center"})}))}if(u+=o,m){t.splitTextToSize(m,a).forEach(((e,o)=>{const i=u+a/2;t.text(e,i,c+5*o,{align:"center"})}))}if(u+=a,j){t.splitTextToSize(j,r).forEach(((e,o)=>{const a=u+r/2;t.text(e,a,c+5*o,{align:"center"})}))}if(u+=r,S){t.splitTextToSize(S,n).forEach(((e,o)=>{const a=u+n/2;t.text(e,a,c+5*o,{align:"center"})}))}u+=n;const g=u+l/2;t.text(A.toString(),g,c),h+=A,u+=l;const E=u+s/2;if(t.text(R(v),E,c),x+=v,u+=s,C){t.splitTextToSize(C,d).forEach(((e,o)=>{const a=u+d/2;t.text(e,a,c+5*o,{align:"center"})}))}c+=3,c+=3})),c+=3;const m=10+o+a+r+5;t.setFontSize(7);const j="Total:",S=t.getTextWidth(j);t.text(j,m+r/2-S/2,c);const A=m+(r+10);t.text(`${h}`,A,c);const v=m+(r+35);t.text(`${R(x)}`,v,c),c+=5})),t.save("estoque_medicamentos.pdf")},children:"Exportar PDF"})," "]}),(0,r.jsx)("div",{id:"estoque",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Nome"}),(0,r.jsx)("th",{children:"Laborat\xf3rio"}),(0,r.jsx)("th",{children:"Tipo de Servi\xe7o"}),(0,r.jsx)("th",{children:"Tipo de Medicamento"}),(0,r.jsx)("th",{children:"Lote"}),(0,r.jsx)("th",{children:"Quantidade"}),(0,r.jsx)("th",{children:"Data de Validade"}),(0,r.jsx)("th",{children:"Valor"}),(0,r.jsx)("th",{children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:v&&v.length>0?v.filter((e=>e.nome.toLowerCase().includes(b.toLowerCase())||e.laboratorio.toLowerCase().includes(b.toLowerCase())||e.tipoServico.toLowerCase().includes(b.toLowerCase())||e.tipoMedicamento.toLowerCase().includes(b.toLowerCase()))).map(((e,o)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.nome}),(0,r.jsx)("td",{children:e.laboratorio||"N/A"}),(0,r.jsx)("td",{children:e.tipoServico||"N/A"}),(0,r.jsx)("td",{children:e.tipoMedicamento||"N/A"}),(0,r.jsx)("td",{children:e.lotes.map((e=>e.lote)).join(", ")}),(0,r.jsx)("td",{children:e.lotes.map((e=>e.quantidade)).join(", ")}),(0,r.jsx)("td",{children:e.lotes.map((e=>e.dataValidade)).join(", ")}),(0,r.jsx)("td",{children:e.lotes.map((e=>R(e.valor))).join(", ")}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{onClick:()=>(e=>{const o=v[e];t(o.nome),n(o.laboratorio),s(o.tipoServico),c(o.tipoMedicamento),p(o.lotes[0].lote),x(o.lotes[0].quantidade),j(o.lotes[0].dataValidade),A(R(o.lotes[0].valor)),E(e)})(o),children:"Editar"}),(0,r.jsx)("button",{onClick:()=>(e=>{if(window.confirm("Tem certeza que deseja excluir este medicamento?")){const t=v.filter(((t,o)=>o!==e));C(t),localStorage.setItem("medicamentos",JSON.stringify(t))}})(o),children:"Excluir"})]})]},o))):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"9",children:"Nenhum medicamento encontrado."})})})]})})]})}))}}]);
//# sourceMappingURL=116.4ffd1aab.chunk.js.map