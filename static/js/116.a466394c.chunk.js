"use strict";(self.webpackChunkestoque_react=self.webpackChunkestoque_react||[]).push([[116],{116:(e,t,o)=>{o.r(t),o.d(t,{default:()=>n});var a=o(43),i=o(762),r=(o(557),o(579));const n=a.memo((()=>{const[e,t]=(0,a.useState)(""),[o,n]=(0,a.useState)(""),[l,s]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[x,j]=(0,a.useState)(""),[v,S]=(0,a.useState)(""),[g,b]=(0,a.useState)([]),[C,f]=(0,a.useState)(null),[N,q]=(0,a.useState)(""),[y,M]=(0,a.useState)({}),[A,F]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=localStorage.getItem("medicamentos");e&&b(JSON.parse(e))}),[]);const L=()=>{t(""),n(""),s(""),c(""),p(""),m(""),j(""),S(""),f(null)},O=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),E=()=>{const t={};return e||(t.nome="O nome \xe9 obrigat\xf3rio."),o||(t.laboratorio="O laborat\xf3rio \xe9 obrigat\xf3rio."),l||(t.tipoServico="Selecione um tipo de servi\xe7o."),d||(t.tipoMedicamento="Selecione um tipo de medicamento."),u||(t.lote="O lote \xe9 obrigat\xf3rio."),(!h||h<=0)&&(t.quantidade="A quantidade deve ser maior que zero."),x||(t.dataValidade="A data de validade \xe9 obrigat\xf3ria."),(!v||v<=0)&&(t.valor="O valor deve ser maior que zero."),M(t),0===Object.keys(t).length};return(0,r.jsxs)("div",{children:[A&&(0,r.jsx)("div",{className:"loading-indicator",children:"Carregando..."}),(0,r.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!E())return;const a={nome:e.toUpperCase(),laboratorio:o.toUpperCase(),tipoServico:l.toUpperCase(),tipoMedicamento:d.toUpperCase(),lotes:[{lote:u.toUpperCase(),quantidade:h,dataValidade:x,valor:parseFloat(v.replace(/\./g,"").replace(",","."))}]},i=null!==C?g.map(((e,t)=>t===C?a:e)):[...g,a];b(i),localStorage.setItem("medicamentos",JSON.stringify(i)),L()},children:[(0,r.jsx)("label",{htmlFor:"nome",children:"Nome"}),(0,r.jsx)("input",{type:"text",id:"nome",placeholder:"Nome",value:e,onChange:e=>t(e.target.value),required:!0}),y.nome&&(0,r.jsx)("span",{className:"error",children:y.nome}),(0,r.jsx)("label",{htmlFor:"laboratorio",children:"Laborat\xf3rio"}),(0,r.jsx)("input",{type:"text",id:"laboratorio",placeholder:"Laborat\xf3rio",value:o,onChange:e=>n(e.target.value),required:!0}),y.laboratorio&&(0,r.jsx)("span",{className:"error",children:y.laboratorio}),(0,r.jsx)("label",{htmlFor:"tipoServico",children:"Tipo de Servi\xe7o"}),(0,r.jsxs)("select",{id:"tipoServico",value:l,onChange:e=>s(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecione um tipo de servi\xe7o..."}),(0,r.jsx)("option",{value:"ANEMIA FALCIFORME",children:"ANEMIA FALCIFORME"}),(0,r.jsx)("option",{value:"ANTIMICROBIANOS",children:"ANTIMICROBIANOS"})]}),y.tipoServico&&(0,r.jsx)("span",{className:"error",children:y.tipoServico}),(0,r.jsx)("label",{htmlFor:"tipoMedicamento",children:"Tipo de Medicamento"}),(0,r.jsxs)("select",{id:"tipoMedicamento",value:d,onChange:e=>c(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Selecione um tipo de medicamento..."}),(0,r.jsx)("option",{value:"ADESIVO",children:"ADESIVO"}),(0,r.jsx)("option",{value:"AMPOLA",children:"AMPOLA"})]}),y.tipoMedicamento&&(0,r.jsx)("span",{className:"error",children:y.tipoMedicamento}),(0,r.jsx)("label",{htmlFor:"lote",children:"Lote"}),(0,r.jsx)("input",{type:"text",id:"lote",placeholder:"Lote",value:u,onChange:e=>p(e.target.value),required:!0}),y.lote&&(0,r.jsx)("span",{className:"error",children:y.lote}),(0,r.jsx)("label",{htmlFor:"quantidade",children:"Quantidade"}),(0,r.jsx)("input",{type:"number",id:"quantidade",placeholder:"Quantidade",value:h,onChange:e=>m(e.target.value),required:!0}),y.quantidade&&(0,r.jsx)("span",{className:"error",children:y.quantidade}),(0,r.jsx)("label",{htmlFor:"dataValidade",children:"Data de Validade"}),(0,r.jsx)("input",{type:"date",id:"dataValidade",placeholder:"Data de Validade",value:x,onChange:e=>j(e.target.value),required:!0}),y.dataValidade&&(0,r.jsx)("span",{className:"error",children:y.dataValidade}),(0,r.jsx)("label",{htmlFor:"valor",children:"Valor"}),(0,r.jsx)("input",{type:"text",id:"valor",placeholder:"Valor",value:O(v/100),onChange:e=>{const t=e.target.value.replace(/\D/g,""),o=O(t/100);S(t),e.target.value=o},required:!0}),y.valor&&(0,r.jsx)("span",{className:"error",children:y.valor}),(0,r.jsx)("button",{type:"submit",children:null!==C?"Atualizar Medicamento":"Adicionar Medicamento"})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:"20px"},children:[(0,r.jsx)("input",{type:"text",placeholder:"Buscar Medicamento",value:N,onChange:e=>q(e.target.value),className:"search-input"}),(0,r.jsx)("button",{className:"search-button",onClick:()=>{},children:"Buscar"})]}),(0,r.jsxs)("div",{className:"export-buttons",children:[(0,r.jsx)("button",{onClick:()=>{F(!0);const e=JSON.stringify(g,null,2),t=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(t),a=document.createElement("a");a.href=o,a.download="medicamentos.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o),F(!1)},children:"Exportar Medicamentos"}),(0,r.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return void alert("Por favor, selecione um arquivo.");F(!0);const o=new FileReader;o.onload=e=>{try{const t=JSON.parse(e.target.result);b(t)}catch(t){alert("Erro ao importar JSON. Verifique o formato do arquivo.")}finally{F(!1)}},o.readAsText(t)},style:{display:"none"},id:"file-input"}),(0,r.jsx)("button",{onClick:()=>document.getElementById("file-input").click(),className:"import-button",children:"Importar Medicamentos"}),(0,r.jsx)("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("medicamentos"))||[],t=new i.jsPDF,o=20,a=30,r=25,n=30,l=20,s=30,d=40;let c=20;const u=t.internal.pageSize.getWidth();t.setFontSize(10),t.text("Controle de Estoque de Medicamentos",u/2,c,{align:"center"}),c+=6,t.setFontSize(9),t.text(`Data: ${(new Date).toLocaleDateString()}`,u/2,c,{align:"center"}),c+=10,e.forEach((e=>{t.setFontSize(10);const i=c;t.setFillColor(220,220,220),t.rect(0,i,u,8,"F"),t.setTextColor(0);const p=e.nome||"";t.text(p,10,i+5),c+=11,t.setFontSize(7);let h=0,m=0;e.lotes.forEach((i=>{let u=10;const p=i.lote||"",x=i.dataValidade||"",j=e.tipoServico||"",v=e.tipoMedicamento||"",S=Number(i.quantidade)||0,g=Number(i.valor)||0,b=e.laboratorio||"";if(p){t.splitTextToSize(p,o).forEach(((e,a)=>{const i=u+o/2;t.text(e,i,c+5*a,{align:"center"})}))}if(u+=o,x){t.splitTextToSize(x,a).forEach(((e,o)=>{const i=u+a/2;t.text(e,i,c+5*o,{align:"center"})}))}if(u+=a,j){t.splitTextToSize(j,r).forEach(((e,o)=>{const a=u+r/2;t.text(e,a,c+5*o,{align:"center"})}))}if(u+=r,v){t.splitTextToSize(v,n).forEach(((e,o)=>{const a=u+n/2;t.text(e,a,c+5*o,{align:"center"})}))}u+=n;const C=u+l/2;t.text(S.toString(),C,c),h+=S,u+=l;const f=u+s/2;if(t.text(O(g),f,c),m+=g,u+=s,b){t.splitTextToSize(b,d).forEach(((e,o)=>{const a=u+d/2;t.text(e,a,c+5*o,{align:"center"})}))}c+=3,c+=3})),c+=3;const x=10+o+a+r+5;t.setFontSize(7);const j="Total:",v=t.getTextWidth(j);t.text(j,x+r/2-v/2,c);const S=x+(r+10);t.text(`${h}`,S,c);const g=x+(r+35);t.text(`${O(m)}`,g,c),c+=5})),t.save("estoque_medicamentos.pdf")},children:"Exportar PDF"})," "]}),(0,r.jsx)("div",{id:"estoque",children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Nome"}),(0,r.jsx)("th",{children:"Laborat\xf3rio"}),(0,r.jsx)("th",{children:"Tipo de Servi\xe7o"}),(0,r.jsx)("th",{children:"Tipo de Medicamento"}),(0,r.jsx)("th",{children:"Lote"}),(0,r.jsx)("th",{children:"Quantidade"}),(0,r.jsx)("th",{children:"Data de Validade"}),(0,r.jsx)("th",{children:"Valor"}),(0,r.jsx)("th",{children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{children:g&&g.length>0?g.filter((e=>e.nome.toLowerCase().includes(N.toLowerCase())||e.laboratorio.toLowerCase().includes(N.toLowerCase())||e.tipoServico.toLowerCase().includes(N.toLowerCase())||e.tipoMedicamento.toLowerCase().includes(N.toLowerCase()))).map(((e,o)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.nome}),(0,r.jsx)("td",{children:e.laboratorio||"N/A"}),(0,r.jsx)("td",{children:e.tipoServico||"N/A"}),(0,r.jsx)("td",{children:e.tipoMedicamento||"N/A"}),(0,r.jsx)("td",{children:e.lotes.map((e=>e.lote)).join(", ")}),(0,r.jsx)("td",{children:e.lotes.map((e=>e.quantidade)).join(", ")}),(0,r.jsx)("td",{children:e.lotes.map((e=>e.dataValidade)).join(", ")}),(0,r.jsx)("td",{children:e.lotes.map((e=>O(e.valor))).join(", ")}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{onClick:()=>(e=>{const o=g[e];t(o.nome),n(o.laboratorio),s(o.tipoServico),c(o.tipoMedicamento),p(o.lotes[0].lote),m(o.lotes[0].quantidade),j(o.lotes[0].dataValidade),S(O(o.lotes[0].valor)),f(e)})(o),children:"Editar"}),(0,r.jsx)("button",{onClick:()=>(e=>{if(window.confirm("Tem certeza que deseja excluir este medicamento?")){const t=g.filter(((t,o)=>o!==e));b(t),localStorage.setItem("medicamentos",JSON.stringify(t))}})(o),children:"Excluir"})]})]},o))):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"9",children:"Nenhum medicamento encontrado."})})})]})})]})}))}}]);
//# sourceMappingURL=116.a466394c.chunk.js.map